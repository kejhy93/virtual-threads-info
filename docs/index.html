<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Java Virtual Threads</title>
    <link rel="stylesheet" href="./style.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>

    <div id="slides-container"></div>

    <div class="navigation">
        <button id="prev" disabled>&larr;</button>
        <button id="next">&rarr;</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const slidesContainer = document.getElementById('slides-container');
            const prevButton = document.getElementById('prev');
            const nextButton = document.getElementById('next');
            let slides = [];
            let currentSlide = 0;

            function showSlide(index) {
                slides.forEach((slide, i) => {
                    slide.classList.remove('current');
                    if (i === index) {
                        slide.classList.add('current');
                    }
                });
                prevButton.disabled = index === 0;
                nextButton.disabled = index === slides.length - 1;
            }

            function setupNavigation() {
                nextButton.addEventListener('click', () => {
                    if (currentSlide < slides.length - 1) {
                        currentSlide++;
                        showSlide(currentSlide);
                    }
                });

                prevButton.addEventListener('click', () => {
                    if (currentSlide > 0) {
                        currentSlide--;
                        showSlide(currentSlide);
                    }
                });
            }

            fetch('slide.md')
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.text();
                })
                .then(text => {
                    const slideContents = text.split(/\n---\n/);
                    slideContents.forEach((content, index) => {
                        const slide = document.createElement('div');
                        slide.className = 'slide';
                        const parsedContent = marked.parse(content);
                        console.log('Parsed content for slide:', parsedContent);
                        slide.innerHTML = parsedContent;
                        slidesContainer.appendChild(slide);
                    });
                    slides = document.querySelectorAll('.slide');
                    if (slides.length > 0) {
                        showSlide(0);
                    }
                    setupNavigation();
                })
                .catch(e => {
                    console.error('Error fetching or parsing slide.md:', e);
                    slidesContainer.innerHTML = `
                        <div class="slide current">
                            <h2>Error</h2>
                            <p>Could not load presentation content. Please check the console for details.</p>
                        </div>
                    `;
                });
        });
    </script>
</body>
</html>